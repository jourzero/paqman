<!DOCTYPE html>
<html lang="en-GB">
    <head>
        <meta charset="utf-8" />
        <title>Go Easy!</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="Go Easy Tracker.  Works offline." />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="styles/main.css" />
        <script src="scripts/goeasy.js"></script>
        <script src="scripts/jquery-3.4.1.min.js"></script>
    </head>
    <body onload="restoreUnits(); restoreDrinkParams();">
        <div id="container">
            <br />
            <form class="pure-form">
                <table>
                    <tbody>
                        <tr>
                            <td class="c1"></td>
                            <td class="c2">
                                <span class="details"> En début de semaine,<br />on repart! </span>
                            </td>
                            <td class="c3">
                                <button
                                    type="submit"
                                    class="button-xsmall button-secondary"
                                    onclick="resetUnits();"
                                >
                                    R&eacute;init.
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td class="c1"></td>
                            <td class="c2">
                                <table align="right">
                                    <tr>
                                        <td> <input type="text" placeholder="%" id="ScotchStrength" size="3" class="tightInput" /> % </td>
                                        <td> <input type="text" placeholder="ml" id="ScotchVolume" size="3" class="tightInput" /> ml </td>
                                        <td> <input type="text" placeholder="Unit&eacute;s" readonly id="ScotchUnits" size="3" class="tightInput" /> un. </td>
                                    </tr>
                                </table>
                            </td>
                            <td class="c3">
                                <button
                                    type="submit"
                                    class="button-scotch"
                                    onclick="takeUnits('Scotch')"
                                    title="Petit verre de Scotch (verre à shooter)"
                                >
                                    Scotch
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td class="c1"></td>
                            <td class="c2">
                                <table align="right">
                                    <tr>
                                        <td> <input type="text" placeholder="%" id="WineByVolumeStrength" size="3" class="tightInput" /> % </td>
                                        <td> <input type="text" placeholder="ml" id="WineByVolumeVolume" size="3" class="tightInput" /> ml </td>
                                        <td> <input type="text" placeholder="Unit&eacute;s" readonly id="WineByVolumeUnits" size="3" class="tightInput" /> un. </td>
                                    </tr>
                                </table>
                            </td>
                            <td class="c3">
                                <button
                                    type="submit"
                                    class="button-wine"
                                    onclick="takeUnits('WineByVolume')"
                                    title="Verre de 1/8 de litre"
                                >
                                    Vin<br />(ml)
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td class="c1"></td>
                            <td class="c2">
                                <table align="right">
                                    <tr>
                                        <td> <input type="text" placeholder="%" id="WineGlassStrength" size="3" class="tightInput" /> % </td>
                                        <td> <input type="text" placeholder="ml" id="WineGlassVolume" size="3" class="tightInput" /> ml </td>
                                        <td> <input type="text" placeholder="Unit&eacute;s" readonly id="WineGlassUnits" size="3" class="tightInput" /> un. </td>
                                    </tr>
                                </table>
                            </td>
                            <td class="c3">
                                <button
                                    type="submit"
                                    class="button-wine"
                                    onclick="takeUnits('WineGlass')"
                                    title="Verre de vin de grandeur normale"
                                >
                                    Vin<br />(verre)
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td class="c1"></td>
                            <td class="c2">
                                <table align="right">
                                    <tr>
                                        <td> <input type="text" placeholder="%" id="BeerBottleStrength" size="3" class="tightInput" /> % </td>
                                        <td> <input type="text" placeholder="ml" id="BeerBottleVolume" size="3" class="tightInput" /> ml </td>
                                        <td> <input type="text" placeholder="Unit&eacute;s" readonly id="BeerBottleUnits" size="3" class="tightInput" /> un. </td>
                                    </tr>
                                </table>
                            </td>
                            </td>
                            <td class="c3"> <button type="submit" class="button-beer" onclick="takeUnits('BeerBottle')" > Bi&egrave;re<br />(bouteille) </button> </td>
                        </tr>
                        <tr>
                            <td class="c1"></td>
                            <td class="c2"> 
                                <table align="right">
                                    <tr>
                                        <td> <input type="text" placeholder="%" id="BeerPintStrength" size="3" class="tightInput" /> % </td>
                                        <td> <input type="text" placeholder="ml" id="BeerPintVolume" size="3" class="tightInput" /> ml </td>
                                        <td> <input type="text" placeholder="Unit&eacute;s" readonly id="BeerPintUnits" size="3" class="tightInput" /> un. </td>
                                    </tr>
                                </table>
                            </td>
                            <td class="c3"> <button type="submit" class="button-beer" onclick="takeUnits('BeerPint')" > Bi&egrave;re<br />(pinte) </button> 
                        </tr>

                        <tr>
                            <td class="c1"></td>
                            <td class="c2">
                                <table align="right">
                                    <tr>
                                        <td> <input type="text" placeholder="%" id="CustomStrength" size="3" class="tightInput" /> % </td>
                                        <td> <input type="text" placeholder="ml" id="CustomVolume" size="3" class="tightInput" /> ml </td>
                                        <td> <input type="text" placeholder="Unit&eacute;s" readonly id="CustomUnits" size="3" class="tightInput" /> un. </td>
                                    </tr>
                                </table>
                            </td>
                            <td class="c3">
                                <input
                                    type="text"
                                    placeholder="Custom"
                                    id="CustomName"
                                    class="CustomNameInput"
                                    size="12"
                                />
                                <button
                                    type="submit"
                                    class="addButton"
                                    onclick="takeUnits('Custom')"
                                >
                                    +
                                </button>
                            </td>
                        </tr>

                        <tr>
                            <td class="c1"></td>
                            <td class="c2">
                                Unit&eacute;s Restantes
                            </td>
                            <td class="c3">
                                <input
                                    type="text"
                                    class="pure-input-rounded"
                                    placeholder="0"
                                    id="unitsLeft"
                                    size="5"
                                    readonly
                                />
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>

            <table class="refs">
                <tr>
                    <td>
                        &nbsp;
                        <small>
                            <a href="#" onclick="showLog()">Journal</a><br />
                            R&eacute;f.:
                            <a
                                href="https://www.nhs.uk/live-well/alcohol-support/calculating-alcohol-units/"
                                target="ref"
                                >Unit&eacute;s d'alcool
                            </a>
                            |
                            <a href="https://www.bbc.com/news/uk-35255384" target="ref"
                                >Limite recommand&eacute;e</a
                            >
                        </small>
                        &nbsp;
                    </td>
                </tr>
            </table>
        </div>
    </body>

    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("sw.js").then(function(registration) {
                console.log("Service Worker Registered");
            });

            navigator.serviceWorker.ready.then(function(registration) {
                console.log("Service Worker Ready");
                restoreUnits();
                restoreCustoms();
            });
        }
        /*
        $("#inStrength").blur(function() {
            getCustomUnits();
        });
        $("#inVolume").blur(function() {
            getCustomUnits();
        });
        */
        $(".CustomNameInput").blur(function() {
            saveDrinkParams();
        });
        $(".tightInput").blur(function() {
            saveDrinkParams();
        });
    </script>
</html>
